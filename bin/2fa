#!/usr/bin/env bash

termite -r picker -e "bash -c '2fa-cli | fzf > /tmp/2fa.selected'"
sleep 0.1

SELECTED_2FA=$(grep -Eo "[0-9]+" /tmp/2fa.selected)

if [ -z "$SELECTED_2FA" ]; then
    exit 1
fi

echo -n "$SELECTED_2FA" | clipit
xdotool key --clearmodifiers ctrl+shift+v
