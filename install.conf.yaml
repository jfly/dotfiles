- clean: ['~']

- link:
    ~/.dotfiles:
        path: ""
        force: true
    ~/.gitconfig:
        path: gitconfig
        force: true
    ~/.gitignore_global:
        path: gitignore_global
        force: true
    ~/.vim:
        path: vim/
        force: true
    ~/.vimrc:
        path: vimrc
        force: true
    ~/.bashrc:
        path: bashrc
        force: true
    ~/.bash_profile:
        path: bash_profile
        force: true
    ~/.aliases:
        path: aliases
        force: true
    ~/.xmonad/xmonad.hs:
        path: xmonad.hs
        create: true
        force: true
    ~/.xmobarrc:
        path: xmobarrc
        force: true
    ~/.Xmodmap:
        path: Xmodmap
        force: true
    ~/.Xresources:
        path: Xresources
        force: true
    ~/.xinitrc:
        path: xinitrc
        force: true
    ~/.conkyrc:
        path: conkyrc
        force: true
    ~/bin:
        path: bin
        force: true
    ~/.config/autorandr:
        path: autorandr
        create: true
        force: true
    ~/.config/roxterm.sourceforge.net:
        path: roxterm.sourceforge.net
        create: true
        force: true
    ~/.config/termite:
        path: termite
        create: true
        force: true
    ~/.config/dunst:
        path: dunst
        create: true
        force: true
    ~/.dir_colors:
        path: dir_colors
        force: true
    ~/.ssh/config:
        path: ssh_config
        create: true
        force: true
    ~/.keynavrc:
        path: keynavrc
        force: true

    /etc/systemd/logind.conf.d/no-suspend-on-lidswitch.conf:
        path: no-suspend-on-lidswitch.conf
        create: true
        force: true
    /etc/systemd/logind.conf.d/suspend-on-powerbutton.conf:
        path: suspend-on-powerbutton.conf
        create: true
        force: true
    /etc/X11/xorg.conf.d/20-kaladin-intel.conf:
        path: 20-kaladin-intel.conf
        create: true
        force: true
    # Fix trackpoint middle button scroll by creating a `/etc/X11/xorg.conf.d/20-trackpoint.conf` as per https://wiki.archlinux.org/index.php/Lenovo_ThinkPad_T410.
    /etc/X11/xorg.conf.d/20-trackpoint.conf:
        path: 20-trackpoint.conf
        create: true
        force: true
    /etc/vconsole.conf:
        path: vconsole.conf
        create: true
        force: true

    /usr/lib/systemd/system/fixkeys.path:
        path: units/fixkeys.path
        create: true
        force: true
    /usr/lib/systemd/system/fixkeys.service:
        path: units/fixkeys.service
        create: true
        force: true
    /usr/lib/systemd/system/fixmouse.path:
        path: units/fixkeys.path
        create: true
        force: true
    /usr/lib/systemd/system/fixmouse.service:
        path: units/fixkeys.service
        create: true
        force: true

    /etc/udev/rules.d/10-local.rules:
        path: udev/10-local.rules
        create: true
        force: true
    /usr/lib/systemd/system/monitors.service:
        path: units/monitors.service
        create: true
        force: true
    /etc/modprobe.d/nobeep.conf:
        path: nobeep.conf
        create: true
        force: true

- shell:
  -
    - git update-submodules
    - Install/update submodules
